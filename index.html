<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Curso Gu√≠as Museo Scasso</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --purple: #9b59b6;
            --info: #17a2b8;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(to right, var(--primary), var(--dark));
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .header-content {
            flex: 1;
        }
        
        .header-logo {
            margin-left: 20px;
        }
        
        .header-logo img {
            height: 70px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        h1, h2, h3, h4 {
            margin-top: 0;
            font-weight: 600;
        }
        
        header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        header p {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.12);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .compact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .input-group {
            margin-bottom: 15px;
            position: relative;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            background: linear-gradient(to right, var(--secondary), var(--info));
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .btn-info {
            background: linear-gradient(to right, var(--purple), #8e44ad);
            padding: 8px 12px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .btn-scenario {
            background: linear-gradient(to right, var(--purple), #8e44ad);
            padding: 10px 15px;
            font-size: 14px;
            margin: 3px;
            width: 100%;
        }
        
        .result-box {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            font-size: 0.9rem;
        }
        
        .positive {
            background: linear-gradient(to right, rgba(39, 174, 96, 0.15), rgba(39, 174, 96, 0.25));
            color: var(--success);
            border-left: 5px solid var(--success);
        }
        
        .negative {
            background: linear-gradient(to right, rgba(231, 76, 60, 0.15), rgba(231, 76, 60, 0.25));
            color: var(--danger);
            border-left: 5px solid var(--danger);
        }
        
        .neutral {
            background: linear-gradient(to right, rgba(243, 156, 18, 0.15), rgba(243, 156, 18, 0.25));
            color: var(--warning);
            border-left: 5px solid var(--warning);
        }
        
        .info-tooltip {
            position: relative;
            display: inline-block;
            margin-left: 6px;
            cursor: help;
            color: var(--secondary);
        }
        
        .info-tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-weight: normal;
            font-size: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
            font-size: 0.85rem;
        }
        
        .summary-table th, .summary-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .summary-table th {
            background: linear-gradient(to right, var(--primary), var(--dark));
            color: white;
            font-weight: 600;
        }
        
        .summary-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .summary-table tr:hover {
            background-color: #e9ecef;
        }
        
        .color-indicator {
            display: inline-block;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .scenarios-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .fixed-budget {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--info);
            margin-bottom: 12px;
            font-size: 0.85rem;
        }
        
        .fixed-budget h4 {
            color: var(--info);
            display: flex;
            align-items: center;
            font-size: 0.95rem;
            margin-bottom: 8px;
        }
        
        .fixed-budget h4 i {
            margin-right: 8px;
        }
        
        .cost-detail {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 4px solid var(--secondary);
        }
        
        .cost-detail h4 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            color: var(--secondary);
            font-size: 0.95rem;
        }
        
        .cost-detail h4 i {
            transition: transform 0.3s;
        }
        
        .cost-detail-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }
        
        .cost-item {
            margin-bottom: 8px;
        }
        
        .cost-item label {
            font-weight: 600;
            color: var(--dark);
            display: block;
            margin-bottom: 4px;
            font-size: 0.85rem;
        }
        
        .recomendaciones-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .recomendacion-box {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            max-width: 550px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .close-modal {
            float: right;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .subsidio-info {
            background-color: #e8f4f8;
            border-left: 4px solid var(--info);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            font-size: 0.85rem;
        }
        
        .subsidio-info h4 {
            color: var(--info);
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .equilibrio-box {
            background: linear-gradient(to right, rgba(243, 156, 18, 0.2), rgba(243, 156, 18, 0.3));
            border: 2px dashed var(--warning);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            font-size: 0.85rem;
        }
        
        .equilibrio-box h4 {
            color: var(--warning);
            display: flex;
            align-items: center;
            font-size: 0.95rem;
            margin-bottom: 8px;
        }
        
        .equilibrio-box h4 i {
            margin-right: 8px;
        }
        
        .nested-item {
            padding-left: 20px;
            margin: 5px 0;
            font-size: 0.85rem;
        }
        
        .nested-item .negative {
            background: rgba(231, 76, 60, 0.1);
            padding: 8px;
        }
        
        .nested-item .positive {
            background: rgba(39, 174, 96, 0.1);
            padding: 8px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #eee;
        }
        
        .section-title i {
            margin-right: 10px;
            color: var(--secondary);
        }
        
        .compact-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .main-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .quick-scenarios {
            margin-top: 15px;
        }
        
        .desglose-compacto {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .desglose-categoria {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .desglose-categoria h4 {
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
            color: var(--dark);
            display: flex;
            align-items: center;
        }
        
        .desglose-categoria h4 i {
            margin-right: 8px;
            color: var(--secondary);
        }
        
        .desglose-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 0.85rem;
        }
        
        .desglose-item.positive {
            color: var(--success);
        }
        
        .desglose-item.negative {
            color: var(--danger);
        }
        
        .desglose-subitem {
            padding-left: 15px;
            margin-bottom: 4px;
            font-size: 0.8rem;
        }
        
        .desglose-total {
            font-weight: bold;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed #ddd;
        }
        
        .recomendacion-box.success {
            background: linear-gradient(to right, rgba(39, 174, 96, 0.1), rgba(39, 174, 96, 0.2));
            border-left: 4px solid var(--success);
        }
        
        .recomendacion-box.warning {
            background: linear-gradient(to right, rgba(243, 156, 18, 0.1), rgba(243, 156, 18, 0.2));
            border-left: 4px solid var(--warning);
        }
        
        .recomendacion-box.danger {
            background: linear-gradient(to right, rgba(231, 76, 60, 0.1), rgba(231, 76, 60, 0.2));
            border-left: 4px solid var(--danger);
        }
        
        .recomendacion-box.info {
            background: linear-gradient(to right, rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.2));
            border-left: 4px solid var(--info);
        }
        
        .recomendacion-box h4 {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .recomendacion-box h4 i {
            margin-right: 8px;
        }
        
        .recomendacion-box.success h4 {
            color: var(--success);
        }
        
        .recomendacion-box.warning h4 {
            color: var(--warning);
        }
        
        .recomendacion-box.danger h4 {
            color: var(--danger);
        }
        
        .recomendacion-box.info h4 {
            color: var(--info);
        }
        
        .honorarios-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .honorario-item {
            margin-bottom: 15px;
        }
        
        .honorario-item label {
            font-weight: 600;
            color: var(--dark);
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .dias-input {
            width: 60px;
            display: inline-block;
            margin-left: 10px;
        }
        
        @media (max-width: 992px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .compact-grid {
                grid-template-columns: 1fr;
            }
            
            .scenarios-container {
                grid-template-columns: 1fr;
            }
            
            .cost-detail-content {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                text-align: center;
            }
            
            .header-logo {
                margin: 15px 0 0 0;
            }
            
            .compact-view {
                grid-template-columns: 1fr;
            }
            
            .main-controls {
                grid-template-columns: 1fr;
            }
            
            .desglose-compacto {
                grid-template-columns: 1fr;
            }
            
            .honorarios-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1><i class="fas fa-calculator"></i> Calculadora Curso Gu√≠as Museo Scasso</h1>
                <p>An√°lisis de viabilidad financiera para el curso de formaci√≥n de promotores ambientales</p>
                <button class="btn btn-info" onclick="openModal()"><i class="fas fa-info-circle"></i> C√≥mo funciona</button>
            </div>
            <div class="header-logo">
                <img src="https://lh3.googleusercontent.com/NGkapjIkUrbxDqJ6x-GBV4Lb6pTRxSfGxw-aw29FfM7wssza5inSvSgj7kSqNlyOFzke_3FLMQv1sxu1_-vVf3h0zPVr-Sh-eV9cZ-BgQROWUmHziY5is9ItlSLPxAJh_gK7CI2LhMza4MSfcfwuNb2YXqpMe0TN4i9Q5C57j3judxvTBQAifQ=w1280" alt="Logo Museo Scasso">
            </div>
        </header>

        <!-- Modal de informaci√≥n -->
        <div id="infoModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <h2><i class="fas fa-info-circle"></i> Funcionamiento de la Calculadora</h2>
                <h3>F√≥rmulas y Relaciones Clave</h3>
                <p><strong>Ingresos Totales</strong> = (Precio Curso √ó Inscritos Completos) + (Precio M√≥dulo √ó M√≥dulos Sueltos)</p>
                <p><strong>Gastos Totales</strong> = Honorarios + Log√≠stica + Vi√°ticos + Materiales + Refrigerio + Vi√°ticos Locales + Otros Gastos</p>
                <p><strong>Subsidios Totales</strong> = Presupuesto Honorarios + Presupuesto Vi√°ticos + Presupuesto Movilidad + Presupuesto Audiovisual</p>
                <p><strong>Balance Neto</strong> = Ingresos Totales + Subsidios Totales - Gastos Totales</p>
                <p><strong>Punto de Equilibrio</strong>: Cuando los subsidios cubren exactamente los gastos totales</p>
                
                <h3>Variables Ajustables</h3>
                <ul>
                    <li><strong>Precio del curso completo</strong>: Define el ingreso por cada participante</li>
                    <li><strong>Precio por m√≥dulo suelto</strong>: Define el ingreso por m√≥dulo individual</li>
                    <li><strong>N√∫mero de inscritos</strong>: Afecta directamente los ingresos y algunos gastos variables</li>
                    <li><strong>N√∫mero de m√≥dulos sueltos</strong>: Afecta los ingresos por m√≥dulos individuales</li>
                </ul>
                
                <h3>Interpretaci√≥n de Resultados</h3>
                <ul>
                    <li><strong style="color: var(--success);">Super√°vit</strong>: Los ingresos + subsidios superan los gastos ‚Üí Proyecto viable con ganancias</li>
                    <li><strong style="color: var(--warning);">Equilibrio</strong>: Los subsidios cubren exactamente los gastos ‚Üí Proyecto viable sin ganancias</li>
                    <li><strong style="color: var(--danger);">D√©ficit</strong>: Los gastos superan ingresos + subsidios ‚Üí Se necesitan ajustes</li>
                </ul>
                
                <h3>Escenarios Predefinidos</h3>
                <ul>
                    <li><strong>Cero</strong>: Sin inscritos ni m√≥dulos vendidos</li>
                    <li><strong>M√≠nimo</strong>: N√∫mero m√≠nimo viable de participantes</li>
                    <li><strong>Realista</strong>: Escenario con expectativas realistas</li>
                    <li><strong>√ìptimo</strong>: Escenario con buenos resultados</li>
                    <li><strong>Solo M√≥dulos</strong>: Solo venta de m√≥dulos sueltos</li>
                    <li><strong>√âxito</strong>: Escenario con m√°ximo √©xito de inscripciones</li>
                </ul>
                
                <h3>Notas Importantes</h3>
                <p>Los m√≥dulos sueltos generan ingresos adicionales sin incrementar significativamente los costos, ya que los participantes de m√≥dulos sueltos solo pagan por los materiales y refrigerio del m√≥dulo espec√≠fico que toman.</p>
            </div>
        </div>

        <div class="compact-view">
            <div>
                <div class="card">
                    <div class="section-title">
                        <i class="fas fa-cog"></i>
                        <h2>Configuraci√≥n B√°sica</h2>
                    </div>
                    
                    <div class="main-controls">
                        <div class="input-group">
                            <label for="precio-curso">Precio Curso Completo ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Establece el precio de inscripci√≥n al curso completo. Valores muy bajos pueden generar p√©rdidas.</div>
                                </div>
                            </label>
                            <input type="number" id="precio-curso" value="55000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="precio-modulo">Precio por M√≥dulo ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Precio para participantes que tomen m√≥dulos individuales.</div>
                                </div>
                            </label>
                            <input type="number" id="precio-modulo" value="8000" min="0">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="costo-material">Costo de Material por Persona ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Incluye carpeta, apuntes, diploma, prendedor y materiales did√°cticos para cada participante.</div>
                            </div>
                        </label>
                        <input type="number" id="costo-material" value="7500" min="0">
                    </div>
                    
                    <div class="fixed-budget">
                        <h4><i class="fas fa-lock"></i> Presupuestos Otorgados (Fijos)</h4>
                        <p><strong>Honorarios:</strong> $372.199,00</p>
                        <p><strong>Vi√°ticos:</strong> $45.795,50</p>
                        <p><strong>Movilidad:</strong> $171.275,18</p>
                        <p><strong>Audiovisual:</strong> $165.421,78 (Ejecutado)</p>
                        <p><strong>Total Subsidios:</strong> $<span id="total-subsidios">754.691,46</span></p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="section-title">
                        <i class="fas fa-users"></i>
                        <h2>Escenario de Inscripciones</h2>
                    </div>
                    
                    <div class="main-controls">
                        <div class="input-group">
                            <label for="inscritos-completos">Inscritos Curso Completo
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">N√∫mero estimado de participantes que tomar√°n el curso completo.</div>
                                </div>
                            </label>
                            <input type="number" id="inscritos-completos" value="15" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="modulos-sueltos">M√≥dulos Sueltos Vendidos
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Cantidad de m√≥dulos individuales que se vender√°n. Cada m√≥dulo genera ingresos adicionales.</div>
                                </div>
                            </label>
                            <input type="number" id="modulos-sueltos" value="20" min="0">
                        </div>
                    </div>
                    
                    <div class="quick-scenarios">
                        <h4>Escenarios R√°pidos:
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Estos escenarios predefinidos permiten visualizar r√°pidamente diferentes situaciones de inscripci√≥n.</div>
                            </div>
                        </h4>
                        <div class="compact-grid">
                            <button class="btn-scenario" onclick="setScenario(1)">Cero
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Sin inscritos ni m√≥dulos vendidos</div>
                                </div>
                            </button>
                            <button class="btn-scenario" onclick="setScenario(2)">M√≠nimo
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">N√∫mero m√≠nimo viable de participantes</div>
                                </div>
                            </button>
                            <button class="btn-scenario" onclick="setScenario(3)">Realista
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Escenario con expectativas realistas</div>
                                </div>
                            </button>
                            <button class="btn-scenario" onclick="setScenario(4)">√ìptimo
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Escenario con buenos resultados</div>
                                </div>
                            </button>
                            <button class="btn-scenario" onclick="setScenario(5)">Solo M√≥dulos
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Solo venta de m√≥dulos sueltos</div>
                                </div>
                            </button>
                            <button class="btn-scenario" onclick="setScenario(6)">√âxito
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Escenario con m√°ximo √©xito de inscripciones</div>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="section-title">
                        <i class="fas fa-money-bill-wave"></i>
                        <h2>Costos Operativos</h2>
                    </div>
                    
                    <div class="main-controls">
                        <div class="input-group">
                            <label for="costo-refrigerio">Refrigerio por Persona ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Incluye alimentos y bebidas para cada participante por cada d√≠a de curso.</div>
                                </div>
                            </label>
                            <input type="number" id="costo-refrigerio" value="2000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="viaticos-locales">Vi√°ticos Locales ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Compensaci√≥n para docentes locales por gastos de transporte y alimentaci√≥n.</div>
                                </div>
                            </label>
                            <input type="number" id="viaticos-locales" value="1500" min="0">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="num-sabados">N√∫mero de S√°bados
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Cantidad total de d√≠as que durar√° el curso. Afecta costos de refrigerio y vi√°ticos.</div>
                            </div>
                        </label>
                        <input type="number" id="num-sabados" value="9" min="1">
                    </div>
                </div>
                
                <div class="card">
                    <div class="section-title">
                        <i class="fas fa-calculator"></i>
                        <h2>Calcular Viabilidad</h2>
                    </div>
                    <button id="calcular-btn" class="btn"><i class="fas fa-calculator"></i> Calcular Viabilidad</button>
                </div>
            </div>
            
            <div>
                <div id="resultados" class="card">
                    <div class="section-title">
                        <i class="fas fa-chart-pie"></i>
                        <h2>Resultados del An√°lisis</h2>
                    </div>
                    
                    <div class="equilibrio-box">
                        <h4><i class="fas fa-balance-scale"></i> Punto de Equilibrio</h4>
                        <p>Los subsidios otorgados ($<span id="monto-subsidios">754.691,46</span>) cubren los gastos b√°sicos del curso. Cualquier ingreso por inscripciones representa ganancias netas para el museo.</p>
                    </div>
                    
                    <div class="grid">
                        <div class="result-box" id="resultado-ingresos">
                            <span class="color-indicator" style="background-color: #3498db;"></span>
                            <span id="ingresos-text">Ingresos Totales: $0</span>
                        </div>
                        
                        <div class="result-box" id="resultado-gastos">
                            <span class="color-indicator" style="background-color: #e74c3c;"></span>
                            <span id="gastos-text">Gastos Totales: $0</span>
                        </div>
                        
                        <div class="result-box" id="resultado-subsidios">
                            <span class="color-indicator" style="background-color: #9b59b6;"></span>
                            <span id="subsidios-text">Subsidios Totales: $0</span>
                        </div>
                        
                        <div class="result-box" id="resultado-balance">
                            <span class="color-indicator" style="background-color: #27ae60;"></span>
                            <span id="balance-text">Balance Neto: $0</span>
                        </div>
                    </div>
                    
                    <h3>Desglose Detallado</h3>
                    <div class="desglose-compacto" id="desglose-compacto">
                        <!-- Los detalles se insertar√°n aqu√≠ mediante JavaScript -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="resultados-chart"></canvas>
                    </div>
                    
                    <h3>Recomendaciones</h3>
                    <div id="recomendaciones" class="recomendaciones-container">
                        <!-- Las recomendaciones se insertar√°n aqu√≠ mediante JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">
                <i class="fas fa-receipt"></i>
                <h2>Desglose Detallado de Gastos</h2>
            </div>
            
            <div class="subsidio-info">
                <h4><i class="fas fa-info-circle"></i> Informaci√≥n sobre subsidios</h4>
                <p>Los subsidios otorgados se aplican directamente a los gastos correspondientes. Cualquier excedente de gastos sobre los subsidios debe ser cubierto con los ingresos por inscripciones.</p>
            </div>
            
            <div class="cost-detail">
                <h4 onclick="toggleCostDetail('honorarios-detail')">
                    <span><i class="fas fa-user-tie"></i> Honorarios Docentes (Subsidiados: $372.199,00)</span>
                    <i class="fas fa-chevron-down"></i>
                </h4>
                <div id="honorarios-detail" class="cost-detail-content" style="display: none;">
                    <div class="honorarios-grid">
                        <div class="honorario-item">
                            <label for="honorario-sierra">Enrique Sierra ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Honorario por 4 d√≠as de trabajo</div>
                                </div>
                                <input type="number" id="dias-sierra" class="dias-input" value="4" min="0" max="9">
                                d√≠as
                            </label>
                            <input type="number" id="honorario-sierra" value="135400" min="0">
                        </div>
                        <div class="honorario-item">
                            <label for="honorario-tellechea">Martin Tellechea ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Honorario por 1 d√≠a de trabajo</div>
                                </div>
                                <input type="number" id="dias-tellechea" class="dias-input" value="1" min="0" max="9">
                                d√≠as
                            </label>
                            <input type="number" id="honorario-tellechea" value="33850" min="0">
                        </div>
                        <div class="honorario-item">
                            <label for="honorario-maugeri">Gabriel Maugeri ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Honorario por 1 d√≠a de trabajo</div>
                                </div>
                                <input type="number" id="dias-maugeri" class="dias-input" value="1" min="0" max="9">
                                d√≠as
                            </label>
                            <input type="number" id="honorario-maugeri" value="33850" min="0">
                        </div>
                        <div class="honorario-item">
                            <label for="honorario-toscan">Diego Toscan ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Honorario por 1 d√≠a de trabajo</div>
                                </div>
                                <input type="number" id="dias-toscan" class="dias-input" value="1" min="0" max="9">
                                d√≠as
                            </label>
                            <input type="number" id="honorario-toscan" value="33850" min="0">
                        </div>
                        <div class="honorario-item">
                            <label for="honorario-docentex">DocenteX ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Honorario por 1 d√≠a de trabajo</div>
                                </div>
                                <input type="number" id="dias-docentex" class="dias-input" value="1" min="0" max="9">
                                d√≠as
                            </label>
                            <input type="number" id="honorario-docentex" value="33700" min="0">
                        </div>
                        <div class="honorario-item">
                            <label for="honorario-docente6">Docente Adicional ($)
                                <div class="info-tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <div class="tooltip-text">Honorario para docente adicional</div>
                                </div>
                                <input type="number" id="dias-docente6" class="dias-input" value="0" min="0" max="9">
                                d√≠as
                            </label>
                            <input type="number" id="honorario-docente6" value="0" min="0">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="cost-detail">
                <h4 onclick="toggleCostDetail('logistica-detail')">
                    <span><i class="fas fa-bus"></i> Log√≠stica para Docentes For√°neos (Subsidiados: $171.275,18)</span>
                    <i class="fas fa-chevron-down"></i>
                </h4>
                <div id="logistica-detail" class="cost-detail-content" style="display: none;">
                    <div class="cost-item">
                        <label for="logistica-sierra">Enrique Sierra (San Pedro) ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Transporte desde San Pedro (4 viajes ida y vuelta).</div>
                            </div>
                        </label>
                        <input type="number" id="logistica-sierra" value="21000" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="logistica-tellechea">Martin Tellechea (La Plata) ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Transporte desde La Plata (2 viajes ida y vuelta).</div>
                            </div>
                        </label>
                        <input type="number" id="logistica-tellechea" value="87000" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="logistica-maugeri">Gabriel Maugeri (C√≥rdoba) ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Transporte desde C√≥rdoba (2 viajes ida y vuelta).</div>
                            </div>
                        </label>
                        <input type="number" id="logistica-maugeri" value="112000" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="logistica-toscan">Diego Toscan (San Pedro) ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Transporte desde San Pedro (1 viaje ida y vuelta).</div>
                            </div>
                        </label>
                        <input type="number" id="logistica-toscan" value="5250" min="0">
                    </div>
                </div>
            </div>
            
            <div class="cost-detail">
                <h4 onclick="toggleCostDetail('viaticos-detail')">
                    <span><i class="fas fa-hotel"></i> Vi√°ticos (Subsidiados: $45.795,50)</span>
                    <i class="fas fa-chevron-down"></i>
                </h4>
                <div id="viaticos-detail" class="cost-detail-content" style="display: none;">
                    <div class="cost-item">
                        <label for="viaticos-sierra">Enrique Sierra ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Vi√°ticos para 4 d√≠as de trabajo (alojamiento y alimentaci√≥n).</div>
                            </div>
                        </label>
                        <input type="number" id="viaticos-sierra" value="11495" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="viaticos-tellechea">Martin Tellechea ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Vi√°ticos para 1 d√≠a de trabajo (alojamiento y alimentaci√≥n).</div>
                            </div>
                        </label>
                        <input type="number" id="viaticos-tellechea" value="2874" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="viaticos-maugeri">Gabriel Maugeri ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Vi√°ticos para 1 d√≠a de trabajo (alojamiento y alimentaci√≥n).</div>
                            </div>
                        </label>
                        <input type="number" id="viaticos-maugeri" value="2874" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="viaticos-toscan">Diego Toscan ($)
                            <div class="info-tooltip">
                                <i class="fas fa-info-circle"></i>
                                <div class="tooltip-text">Vi√°ticos para 1 d√≠a de trabajo (alojamiento y alimentaci√≥n).</div>
                            </div>
                        </label>
                        <input type="number" id="viaticos-toscan" value="2874" min="0">
                    </div>
                </div>
            </div>
            
            <div class="cost-detail">
                <h4 onclick="toggleCostDetail('otros-gastos-detail')">
                    <span><i class="fas fa-file-invoice-dollar"></i> Otros Gastos Operativos</span>
                    <i class="fas fa-chevron-down"></i>
                </h4>
                <div id="otros-gastos-detail" class="cost-detail-content" style="display: none;">
                    <div class="cost-item">
                        <label for="gasto-publicidad">Publicidad y Promoci√≥n ($)</label>
                        <input type="number" id="gasto-publicidad" value="20000" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="gasto-materiales">Materiales Did√°cticos Extra ($)</label>
                        <input type="number" id="gasto-materiales" value="15000" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="gasto-infraestructura">Infraestructura y Equipamiento ($)</label>
                        <input type="number" id="gasto-infraestructura" value="25000" min="0">
                    </div>
                    <div class="cost-item">
                        <label for="gasto-imprevistos">Imprevistos ($)</label>
                        <input type="number" id="gasto-imprevistos" value="15000" min="0">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let chart = null;
        
        // Subsidios fijos otorgados
        const subsidiosFijos = {
            honorarios: 372199.00,
            viaticos: 45795.50,
            movilidad: 171275.18,
            audiovisual: 165421.78
        };
        
        // Escenarios predefinidos
        const escenarios = {
            1: { nombre: "Escenario Cero", completos: 0, sueltos: 0, precioCurso: 55000, precioModulo: 8000 },
            2: { nombre: "M√≠nimo Viable", completos: 5, sueltos: 10, precioCurso: 50000, precioModulo: 7500 },
            3: { nombre: "Realista", completos: 15, sueltos: 20, precioCurso: 55000, precioModulo: 8000 },
            4: { nombre: "√ìptimo", completos: 20, sueltos: 25, precioCurso: 60000, precioModulo: 9000 },
            5: { nombre: "Solo M√≥dulos Sueltos", completos: 0, sueltos: 40, precioCurso: 0, precioModulo: 10000 },
            6: { nombre: "√âxito Excepcional", completos: 25, sueltos: 30, precioCurso: 65000, precioModulo: 10000 }
        };

        // Inicializar la calculadora
        document.addEventListener('DOMContentLoaded', function() {
            // Calcular total de subsidios
            const totalSubsidios = subsidiosFijos.honorarios + subsidiosFijos.viaticos + subsidiosFijos.movilidad + subsidiosFijos.audiovisual;
            document.getElementById('total-subsidios').textContent = totalSubsidios.toLocaleString('es-AR', {minimumFractionDigits: 2});
            
            // Configurar evento para el bot√≥n de calcular
            document.getElementById('calcular-btn').addEventListener('click', calcularViabilidad);
            
            // A√±adir event listeners para recalcular cuando cambien los valores
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('input', calcularViabilidad);
            });
            
            // Calcular autom√°ticamente al cargar la p√°gina
            calcularViabilidad();
        });
        
        // Funci√≥n para calcular la viabilidad
        function calcularViabilidad() {
            // Obtener valores de entrada
            const precioCurso = parseFloat(document.getElementById('precio-curso').value) || 0;
            const precioModulo = parseFloat(document.getElementById('precio-modulo').value) || 0;
            const inscritosCompletos = parseInt(document.getElementById('inscritos-completos').value) || 0;
            const modulosSueltos = parseInt(document.getElementById('modulos-sueltos').value) || 0;
            const costoMaterial = parseFloat(document.getElementById('costo-material').value) || 0;
            const costoRefrigerio = parseFloat(document.getElementById('costo-refrigerio').value) || 0;
            const viaticosLocales = parseFloat(document.getElementById('viaticos-locales').value) || 0;
            const numSabados = parseInt(document.getElementById('num-sabados').value) || 0;
            
            // Obtener valores de honorarios individuales
            const honorarioSierra = parseFloat(document.getElementById('honorario-sierra').value) || 0;
            const honorarioTellechea = parseFloat(document.getElementById('honorario-tellechea').value) || 0;
            const honorarioMaugeri = parseFloat(document.getElementById('honorario-maugeri').value) || 0;
            const honorarioToscan = parseFloat(document.getElementById('honorario-toscan').value) || 0;
            const honorarioDocentex = parseFloat(document.getElementById('honorario-docentex').value) || 0;
            const honorarioDocente6 = parseFloat(document.getElementById('honorario-docente6').value) || 0;
            
            // Obtener d√≠as de trabajo
            const diasSierra = parseInt(document.getElementById('dias-sierra').value) || 0;
            const diasTellechea = parseInt(document.getElementById('dias-tellechea').value) || 0;
            const diasMaugeri = parseInt(document.getElementById('dias-maugeri').value) || 0;
            const diasToscan = parseInt(document.getElementById('dias-toscan').value) || 0;
            const diasDocentex = parseInt(document.getElementById('dias-docentex').value) || 0;
            const diasDocente6 = parseInt(document.getElementById('dias-docente6').value) || 0;
            
            // Obtener valores de log√≠stica
            const logisticaSierra = parseFloat(document.getElementById('logistica-sierra').value) || 0;
            const logisticaTellechea = parseFloat(document.getElementById('logistica-tellechea').value) || 0;
            const logisticaMaugeri = parseFloat(document.getElementById('logistica-maugeri').value) || 0;
            const logisticaToscan = parseFloat(document.getElementById('logistica-toscan').value) || 0;
            
            // Obtener valores de vi√°ticos
            const viaticosSierra = parseFloat(document.getElementById('viaticos-sierra').value) || 0;
            const viaticosTellechea = parseFloat(document.getElementById('viaticos-tellechea').value) || 0;
            const viaticosMaugeri = parseFloat(document.getElementById('viaticos-maugeri').value) || 0;
            const viaticosToscan = parseFloat(document.getElementById('viaticos-toscan').value) || 0;
            
            // Obtener otros gastos
            const gastoPublicidad = parseFloat(document.getElementById('gasto-publicidad').value) || 0;
            const gastoMateriales = parseFloat(document.getElementById('gasto-materiales').value) || 0;
            const gastoInfraestructura = parseFloat(document.getElementById('gasto-infraestructura').value) || 0;
            const gastoImprevistos = parseFloat(document.getElementById('gasto-imprevistos').value) || 0;
            
            // Calcular total de subsidios
            const totalSubsidios = subsidiosFijos.honorarios + subsidiosFijos.viaticos + subsidiosFijos.movilidad + subsidiosFijos.audiovisual;
            
            // Calcular ingresos
            const ingresosCursoCompleto = precioCurso * inscritosCompletos;
            const ingresosModulosSueltos = precioModulo * modulosSueltos;
            const ingresosTotales = ingresosCursoCompleto + ingresosModulosSueltos;
            
            // Calcular gastos de honorarios
            const totalHonorarios = honorarioSierra + honorarioTellechea + honorarioMaugeri + honorarioToscan + honorarioDocentex + honorarioDocente6;
            const honorariosCubiertosPorSubsidio = Math.min(totalHonorarios, subsidiosFijos.honorarios);
            const honorariosPorCubrir = Math.max(0, totalHonorarios - subsidiosFijos.honorarios);
            
            // Calcular gastos de log√≠stica
            const totalLogistica = logisticaSierra + logisticaTellechea + logisticaMaugeri + logisticaToscan;
            const logisticaCubiertaPorSubsidio = Math.min(totalLogistica, subsidiosFijos.movilidad);
            const logisticaPorCubrir = Math.max(0, totalLogistica - subsidiosFijos.movilidad);
            
            // Calcular gastos de vi√°ticos
            const totalViaticos = viaticosSierra + viaticosTellechea + viaticosMaugeri + viaticosToscan;
            const viaticosCubiertosPorSubsidio = Math.min(totalViaticos, subsidiosFijos.viaticos);
            const viaticosPorCubrir = Math.max(0, totalViaticos - subsidiosFijos.viaticos);
            
            // CORRECCI√ìN IMPORTANTE: 
            // Los m√≥dulos sueltos NO generan gastos de materiales (solo pagan refrigerio por el m√≥dulo que toman)
            const gastoMaterialTotal = inscritosCompletos * costoMaterial;
            
            // Calcular gastos de refrigerio
            // Inscritos completos pagan refrigerio para todos los encuentros
            // M√≥dulos sueltos pagan refrigerio solo para 1 encuentro
            const gastoRefrigerioTotal = (inscritosCompletos * costoRefrigerio * numSabados) + (modulosSueltos * costoRefrigerio);
            
            // Calcular gastos de vi√°ticos locales
            const totalDiasTrabajo = diasSierra + diasTellechea + diasMaugeri + diasToscan + diasDocentex + diasDocente6;
            const gastoViaticosLocalesTotal = viaticosLocales * totalDiasTrabajo;
            
            // Calcular otros gastos
            const otrosGastos = gastoPublicidad + gastoMateriales + gastoInfraestructura + gastoImprevistos;
            
            // Calcular gastos totales
            const gastosTotales = totalHonorarios + totalLogistica + totalViaticos + gastoMaterialTotal + 
                                gastoRefrigerioTotal + gastoViaticosLocalesTotal + otrosGastos;
            
            // Calcular subsidios aplicados
            const subsidiosAplicados = honorariosCubiertosPorSubsidio + logisticaCubiertaPorSubsidio + 
                                    viaticosCubiertosPorSubsidio + subsidiosFijos.audiovisual;
            
            // Calcular balance neto
            const balanceNeto = ingresosTotales + subsidiosAplicados - gastosTotales;
            
            // Mostrar resultados
            mostrarResultados(ingresosTotales, gastosTotales, subsidiosAplicados, balanceNeto, totalSubsidios);
            
            // Mostrar detalles en el desglose
            mostrarDesgloseCompacto(
                ingresosCursoCompleto, ingresosModulosSueltos,
                totalHonorarios, honorariosCubiertosPorSubsidio, honorariosPorCubrir,
                totalLogistica, logisticaCubiertaPorSubsidio, logisticaPorCubrir,
                totalViaticos, viaticosCubiertosPorSubsidio, viaticosPorCubrir,
                subsidiosFijos.audiovisual,
                gastoMaterialTotal, gastoRefrigerioTotal, gastoViaticosLocalesTotal, otrosGastos,
                balanceNeto
            );
            
            // Generar recomendaciones
            generarRecomendaciones(balanceNeto, inscritosCompletos, modulosSueltos, precioCurso, precioModulo);
        }
        
        // Funci√≥n para mostrar resultados
        function mostrarResultados(ingresos, gastos, subsidios, balance, totalSubsidios) {
            // Mostrar secci√≥n de resultados
            document.getElementById('resultados').style.display = 'block';
            
            // Actualizar montos
            document.getElementById('ingresos-text').textContent = `Ingresos Totales: $${ingresos.toLocaleString('es-AR', {minimumFractionDigits: 2})}`;
            document.getElementById('gastos-text').textContent = `Gastos Totales: $${gastos.toLocaleString('es-AR', {minimumFractionDigits: 2})}`;
            document.getElementById('subsidios-text').textContent = `Subsidios Aplicados: $${subsidios.toLocaleString('es-AR', {minimumFractionDigits: 2})}`;
            document.getElementById('monto-subsidios').textContent = totalSubsidios.toLocaleString('es-AR', {minimumFractionDigits: 2});
            
            // Determinar clase CSS seg√∫n el balance
            let balanceClass = 'neutral';
            let balanceIcon = '<i class="fas fa-balance-scale"></i>';
            
            if (balance > 0) {
                balanceClass = 'positive';
                balanceIcon = '<i class="fas fa-arrow-up"></i>';
            } else if (balance < 0) {
                balanceClass = 'negative';
                balanceIcon = '<i class="fas fa-arrow-down"></i>';
            }
            
            // Actualizar balance
            const balanceElement = document.getElementById('resultado-balance');
            balanceElement.className = `result-box ${balanceClass}`;
            balanceElement.innerHTML = `<span class="color-indicator" style="background-color: ${balanceClass === 'positive' ? '#27ae60' : balanceClass === 'negative' ? '#e74c3c' : '#f39c12'}"></span>
                                        <span id="balance-text">Balance Neto: ${balanceIcon} $${Math.abs(balance).toLocaleString('es-AR', {minimumFractionDigits: 2})} 
                                        (${balance > 0 ? 'Super√°vit' : balance < 0 ? 'D√©ficit' : 'Equilibrio'})</span>`;
            
            // Actualizar gr√°fico
            actualizarGrafico(ingresos, gastos, subsidios, balance);
        }
        
        // Funci√≥n para actualizar el gr√°fico
        function actualizarGrafico(ingresos, gastos, subsidios, balance) {
            const ctx = document.getElementById('resultados-chart').getContext('2d');
            
            // Destruir gr√°fico anterior si existe
            if (chart) {
                chart.destroy();
            }
            
            // Crear nuevo gr√°fico
            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Ingresos', 'Gastos', 'Subsidios', 'Balance'],
                    datasets: [{
                        label: 'Monto en $',
                        data: [ingresos, gastos, subsidios, Math.abs(balance)],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(231, 76, 60, 0.7)',
                            'rgba(155, 89, 182, 0.7)',
                            balance >= 0 ? 'rgba(39, 174, 96, 0.7)' : 'rgba(231, 76, 60, 0.7)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(231, 76, 60, 1)',
                            'rgba(155, 89, 182, 1)',
                            balance >= 0 ? 'rgba(39, 174, 96, 1)' : 'rgba(231, 76, 60, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Monto ($)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `$${context.raw.toLocaleString('es-AR', {minimumFractionDigits: 2})}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Funci√≥n para mostrar detalles en el desglose compacto
        function mostrarDesgloseCompacto(
            ingresosCursoCompleto, ingresosModulosSueltos,
            totalHonorarios, honorariosCubiertos, honorariosPorCubrir,
            totalLogistica, logisticaCubierta, logisticaPorCubrir,
            totalViaticos, viaticosCubiertos, viaticosPorCubrir,
            audiovisualSubsidiado,
            gastoMaterial, gastoRefrigerio, gastoViaticosLocales, otrosGastos,
            balanceNeto
        ) {
            const desglose = document.getElementById('desglose-compacto');
            desglose.innerHTML = '';
            
            // Ingresos
            let ingresosHTML = `
                <div class="desglose-categoria">
                    <h4><i class="fas fa-money-bill-wave"></i> Ingresos</h4>
                    <div class="desglose-item positive">
                        <span>Cursos completos</span>
                        <span>+$${ingresosCursoCompleto.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-item positive">
                        <span>M√≥dulos sueltos</span>
                        <span>+$${ingresosModulosSueltos.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-total positive">
                        <span>Total Ingresos</span>
                        <span>+$${(ingresosCursoCompleto + ingresosModulosSueltos).toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                </div>
            `;
            
            // Gastos y subsidios
            let gastosHTML = `
                <div class="desglose-categoria">
                    <h4><i class="fas fa-credit-card"></i> Gastos y Subsidios</h4>
                    <div class="desglose-item negative">
                        <span>Honorarios docentes</span>
                        <span>-$${totalHonorarios.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-subitem positive">
                        <span>Subsidio aplicado</span>
                        <span>+$${honorariosCubiertos.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
            `;
            
            if (honorariosPorCubrir > 0) {
                gastosHTML += `
                    <div class="desglose-subitem negative">
                        <span>A cargo de ingresos</span>
                        <span>-$${honorariosPorCubrir.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                `;
            }
            
            gastosHTML += `
                    <div class="desglose-item negative">
                        <span>Log√≠stica</span>
                        <span>-$${totalLogistica.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-subitem positive">
                        <span>Subsidio aplicado</span>
                        <span>+$${logisticaCubierta.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
            `;
            
            if (logisticaPorCubrir > 0) {
                gastosHTML += `
                    <div class="desglose-subitem negative">
                        <span>A cargo de ingresos</span>
                        <span>-$${logisticaPorCubrir.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                `;
            }
            
            gastosHTML += `
                    <div class="desglose-item negative">
                        <span>Vi√°ticos</span>
                        <span>-$${totalViaticos.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-subitem positive">
                        <span>Subsidio aplicado</span>
                        <span>+$${viaticosCubiertos.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
            `;
            
            if (viaticosPorCubrir > 0) {
                gastosHTML += `
                    <div class="desglose-subitem negative">
                        <span>A cargo de ingresos</span>
                        <span>-$${viaticosPorCubrir.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                `;
            }
            
            gastosHTML += `
                    <div class="desglose-item positive">
                        <span>Audiovisual (subsidiado)</span>
                        <span>+$${audiovisualSubsidiado.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-item negative">
                        <span>Materiales</span>
                        <span>-$${gastoMaterial.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-item negative">
                        <span>Refrigerio</span>
                        <span>-$${gastoRefrigerio.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-item negative">
                        <span>Vi√°ticos locales</span>
                        <span>-$${gastoViaticosLocales.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-item negative">
                        <span>Otros gastos</span>
                        <span>-$${otrosGastos.toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                    <div class="desglose-total ${balanceNeto >= 0 ? 'positive' : 'negative'}">
                        <span>Balance Neto</span>
                        <span>${balanceNeto >= 0 ? '+' : '-'}$${Math.abs(balanceNeto).toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                    </div>
                </div>
            `;
            
            desglose.innerHTML = ingresosHTML + gastosHTML;
        }
        
        // Funci√≥n para generar recomendaciones
        function generarRecomendaciones(balance, inscritos, modulos, precioCurso, precioModulo) {
            const contenedor = document.getElementById('recomendaciones');
            contenedor.innerHTML = '';
            
            if (balance > 0) {
                agregarRecomendacion(
                    contenedor,
                    'success',
                    '¬°Excelente! El proyecto es viable y genera super√°vit.',
                    'Considera reinvertir las ganancias en mejorar la calidad del curso o en expandir las actividades del museo.',
                    'fa-check-circle'
                );
            } else if (balance === 0) {
                agregarRecomendacion(
                    contenedor,
                    'warning',
                    'El proyecto alcanza el punto de equilibrio.',
                    'Los subsidios cubren exactamente los gastos. Cualquier inscripci√≥n adicional generar√° ganancias.',
                    'fa-balance-scale'
                );
            } else {
                agregarRecomendacion(
                    contenedor,
                    'danger',
                    'Atenci√≥n: El proyecto presenta d√©ficit.',
                    'Es necesario ajustar los costos o aumentar los ingresos para hacerlo viable.',
                    'fa-exclamation-triangle'
                );
                
                if (inscritos < 10) {
                    agregarRecomendacion(
                        contenedor,
                        'info',
                        'Aumentar inscripciones',
                        `Intenta llegar a al menos 10 inscritos completos. Actualmente tienes ${inscritos}.`,
                        'fa-user-plus'
                    );
                }
                
                if (modulos < 15) {
                    agregarRecomendacion(
                        contenedor,
                        'info',
                        'Promocionar m√≥dulos sueltos',
                        `Vender m√°s m√≥dulos sueltos puede aumentar los ingresos. Actualmente tienes ${modulos}.`,
                        'fa-tags'
                    );
                }
                
                if (precioCurso < 60000) {
                    agregarRecomendacion(
                        contenedor,
                        'info',
                        'Revisar precios',
                        `Considera aumentar el precio del curso completo. Actualmente es $${precioCurso}.`,
                        'fa-dollar-sign'
                    );
                }
                
                if (precioModulo < 10000) {
                    agregarRecomendacion(
                        contenedor,
                        'info',
                        'Ajustar precio de m√≥dulos',
                        `El precio de los m√≥dulos sueltos podr√≠a incrementarse. Actualmente es $${precioModulo}.`,
                        'fa-money-bill-wave'
                    );
                }
            }
            
            // Recomendaci√≥n general
            agregarRecomendacion(
                contenedor,
                'info',
                'Estrategia de promoci√≥n',
                'Utiliza redes sociales y contacta con instituciones educativas para promocionar el curso.',
                'fa-bullhorn'
            );
        }
        
        // Funci√≥n auxiliar para agregar recomendaciones
        function agregarRecomendacion(contenedor, tipo, titulo, descripcion, icono) {
            const recomendacion = document.createElement('div');
            recomendacion.className = `recomendacion-box ${tipo}`;
            recomendacion.innerHTML = `
                <h4><i class="fas ${icono}"></i> ${titulo}</h4>
                <p>${descripcion}</p>
            `;
            contenedor.appendChild(recomendacion);
        }
        
        // Funci√≥n para establecer escenarios predefinidos
        function setScenario(num) {
            const escenario = escenarios[num];
            document.getElementById('inscritos-completos').value = escenario.completos;
            document.getElementById('modulos-sueltos').value = escenario.sueltos;
            document.getElementById('precio-curso').value = escenario.precioCurso;
            document.getElementById('precio-modulo').value = escenario.precioModulo;
            
            // Recalcular despu√©s de cambiar los valores
            calcularViabilidad();
        }
        
        // Funci√≥n para alternar la visualizaci√≥n de detalles de costos
        function toggleCostDetail(id) {
            const element = document.getElementById(id);
            const icon = element.previousElementSibling.querySelector('.fa-chevron-down');
            
            if (element.style.display === 'none') {
                element.style.display = 'grid';
                icon.classList.replace('fa-chevron-down', 'fa-chevron-up');
            } else {
                element.style.display = 'none';
                icon.classList.replace('fa-chevron-up', 'fa-chevron-down');
            }
        }
        
        // Funciones para el modal
        function openModal() {
            document.getElementById('infoModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('infoModal').style.display = 'none';
        }
        
        // Cerrar modal al hacer clic fuera del contenido
        window.onclick = function(event) {
            const modal = document.getElementById('infoModal');
            if (event.target === modal) {
                closeModal();
            }
        };
    </script>
</body>
</html>